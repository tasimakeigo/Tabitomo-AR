<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>WebAR</title>
  <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
  <script src="https://ar-js-org.github.io/AR.js/aframe/build/aframe-ar.js"></script>
  <style>
    .top-right-button {
      position: absolute;
      top: 10px;
      right: 10px;
      padding: 10px 20px;
      background-color: #007BFF;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }

    .top-right-button:hover {
      background-color: #0056b3;
    }
  </style>
</head>

<body style="margin: 0px; overflow: hidden;">
  <a-scene vr-mode-ui="enabled: false;" loading-screen="enabled: false;" renderer="logarithmicDepthBuffer: true;"
    arjs="trackingMethod: best; sourceType: webcam; debugUIEnabled: false;" id="scene" embedded gesture-detector>
    <a-assets>
      <a-asset-item id="animated-asset" src="model/glb/free_ac_unit.glb"></a-asset-item>
    </a-assets>

    <!-- マーカーの指定 -->
    <a-marker id="animated-marker" type="pattern" preset="custom" url="model/patt/pattern-marker.patt"
      raycaster="objects: .clickable" emitevents="true" cursor="fuse: false; rayOrigin: mouse;">
      <!-- Glbモデルの読み込み -->
      <a-entity id="model" scale="1 1 1" animation-mixer="loop: repeat" gltf-model="#animated-asset" class="clickable"
        animation="property: rotation; to: 360 360 0; dur: 3600; easing: linear; loop: true" gesture-handler
        visible="false"></a-entity>
    </a-marker>

    <!-- カメラの設定 -->
    <a-entity camera position="0 0 10"></a-entity>
  </a-scene>

  <!-- 右上にボタンを配置 -->
  <a href="japanese.html"><button class="top-right-button">戻る</button></a>

  <script>
    const marker = document.querySelector('#animated-marker');
    const model = document.querySelector('#model');

    // マーカーが見つかったらモデルを表示
    marker.addEventListener('markerFound', function () {
      model.setAttribute('visible', true);  // モデルを表示
    });

    // マーカーが見えなくなったらモデルを非表示
    marker.addEventListener('markerLost', function () {
      model.setAttribute('visible', false);
    });
  </script>
</body>

</html>