<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>モデル詳細情報</title>
    <link rel="stylesheet" href="static/location.css">
</head>

<body>
    <header>
        <h1><a href="menu.html">管理者システム - モデル情報 -</a></h1>
        <ul>
            <li>
                <p>ユーザー名: </p>
            </li>
            <li id="logout">
                <a href="">ログアウト</a>
            </li>
        </ul>
    </header>

    <main>
        <a href="modeladd.html"><button>追加</button></a>
        <div id="location-details"></div>

        <div class="sideber">
            <div class="sideber-container">
                <a href="../menu.html"><button>メニュー</button></a>
                <a href="../AR_user/user.html"><button>管理者情報</button></a>
                <a href="../AR_marker/marker.html"><button>マーカー管理</button></a>
                <a href="../AR_model/modellist.html"><button>3Dモデル</button></a>
                <a href="../AR_napisy/napisy.html"><button>字幕管理</button></a>
                <a href="../AR_sound/sound.html"><button>音声管理</button></a>
                <a href="../AR_map/map.html"><button>マップ管理</button></a>
                <!-- <a href="AR_language/language.html"><button>言語管理</button></a> -->
            </div>
        </div>

        <script>
                // URLのパラメータからlocationidを取得
                const urlParams = new URLSearchParams(window.location.search);
                const locationid = urlParams.get('locationid');

                if (locationid) {
                    // サーバーからそのlocationidに関連するデータを取得
                    fetch(`/locationdetail?locationid=${locationid}`)  // データを取得するエンドポイント
                        .then(response => response.json())
                        .then(data => {
                            const locationDetails = document.getElementById('location-details');
                            let detailsHtml = `<h2>モデル情報: ${locationid}</h2>`;

                            // 各データを表示
                            data.forEach(model => {
                                detailsHtml += `
                                    <p><strong>モデル名:</strong> ${model.mdlname}<br>
                                    <strong>画像:</strong> <img src="${model.mdlimage}" alt="${model.mdlname}" width="200"><br>
                                    <strong>マーカー名:</strong> ${model.mkname}<br>
                                    <strong>パターン:</strong> ${model.patt}<br>
                                    <strong>マーカー画像:</strong> <img src="${model.mkimage}" alt="${model.mkname}" width="200"><br>
                                    <strong>音声ファイル:</strong> ${model.mdlsound}<br>
                                    <strong>モデルテキスト:</strong> ${model.mdltext}
                                    </p>
                                    <button class="edit-btn" data-locationid="${model.locationid}" data-languagename="${model.languagename}">編集</button>
                                    <button class="delete-btn" data-locationid="${model.locationid}" data-languagename="${model.languagename}">削除</button>
                                `;
                            });

                            locationDetails.innerHTML = detailsHtml;
                        })
                        .catch(error => {
                            console.error('モデル情報の取得中にエラーが発生しました:', error);
                            alert('モデル情報の取得に失敗しました。');
                        });
                } else {
                    alert('場所IDが指定されていません。');
                }


        </script>
        </br>
        <button class="add-btn">新規モデル追加</button>
    </main>
</body>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        // URLのパラメータからmdlsoundを取得
        const urlParams = new URLSearchParams(window.location.search);
        const mdlsound = urlParams.get('locationid');

        // 新規モデル追加ボタンがクリックされた場合に遷移する
        const addBtn = document.querySelector('.add-btn');
        addBtn.addEventListener('click', function () {
            if (mdlsound) {
                // 新規モデル追加ページに遷移
                window.location.href = `/AR_admin/AR_location/modeladd.html?locationid=${encodeURIComponent(locationid)}`;
            } else {
                alert('locationid パラメータが見つかりません。');
            }
        });
    });
</script>

</html>